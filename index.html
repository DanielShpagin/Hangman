<!DOCTYPE html>
<html>
<head>
    <title>"Шибениця!"</title>
</head>


<body>
    <script src="https://kit.fontawesome.com/225277b5de.js" crossorigin="anonymous"></script>
    <script src='https://code.jquery.com/jquery-2.1.0.js'></script>
    <div class="container">
        <img id="restart" src="https://raw.githubusercontent.com/DanielShpagin/Hangman/main/img/restart.png" width="100" height="100">
        <img id="myPicture" src="https://danielshpagin.github.io/Hangman/img/1.png">
        <canvas id="canvas" width="1000" height="200"></canvas>
        <a id="regulations" class="myButton">ПРАВИЛА</a>       
        <a id="hangmanRegulation"> Спасите человечка от верной гибели! Угадайте слово на английском языке, иначе быть беде!</a>
        <br><i id="close" class="fas fa-times"></i>
        <h1 id="gameOver"></h1>
        <h1 id="victory"></h1>
    </div>    
<script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext("2d");
    

    var width = canvas.width;
    var height = canvas.height;
    var errors = 0;
    
    $('#regulations').click(function () {
        $('#regulations').hide();
        $('#hangmanRegulation').show();
        $('#close').show();
    });

    $('#close').click(function () {
        $('#regulations').show();
        $('#hangmanRegulation').hide();
        $('#close').hide();
    });

    function drawHangman () {
        if (errors !== 7) {
            for (var q = 1; 8 > q; q++) {
                if (errors === q) {
                    $('#myPicture').show().attr('src','https://danielshpagin.github.io/Hangman/img/'+ (q+1) +'.png');
                }
            }
        }
        if (errors === 7) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            $('#regulations').hide();
            $('#myPicture').hide();
            $('#gameOver').text(`Вы проиграли! Загаданое слово было: ${word}`);
            $('#restart').show().click(function (event) {
                
                $('#gameOver').text("");
                initeAll();
                console.log(word);
            });
        }
    };

    function pickWord () {
        var words = [
            "turtle", 
            "ghost", 
            "winter", 
            "summer", 
            "spring", 
            "autumn", 
            "javascript", 
            "argentina", 
            "mother", 
            "weather", 
            "father", 
            "family", 
            "australia", 
            "america", 
            "animals", 
            "amogus"
        ];
        return words[Math.floor(Math.random() * words.length)];
        canvas.width = word.length*60;
    };

    function initeAll() { 
        word = pickWord();
        errors = 0;
        res = [];
        drawAnswerArray(word);
        $('#myPicture').show().attr('src','https://danielshpagin.github.io/Hangman/img/1.png');
        $('#restart').hide();
        $('#regulations').show();
    };

    

    function drawAnswerArray(word) {     
        canvas.width = word.length*60;   
        ctx.lineWidth = 3;
        ctx.strokeStyle = "Black";
        for (var i = 0; i < word.length; i++) {
            ctx.beginPath();
            ctx.moveTo(i*60, 170);
            ctx.lineTo(i*60 + 50, 170);
            ctx.stroke();
        }
    };
    
    var word;
    var answerArray;
    var res = [];

    initeAll(); 

    for (var u = 0; word.length > u; u++) {
        res.push('_');
    };

    $('body').keydown(function (event) {
        if (errors !== 9) {
            var someThing = false;
            if (event.keyCode >= 65 && event.keyCode <= 90) {
                for (var f = 0; word.length > f; f++) {
                    if (word[f] === event.key.toLowerCase()) {
                        ctx.font = "60px Comic Sans MS";
                        ctx.fillStyle = "Black";
                        ctx.textAlign = "left"; 
                        ctx.textBaseline = "top";
                        ctx.fillText(`${event.key.toUpperCase()}`, f*60, 120);
                        someThing = true;
                        res[f] = `${event.key}`.toLowerCase();
                    }
                }
            }
            if (event.keyCode >= 65 && event.keyCode <= 90) {
                if (someThing === false) {
                    errors++;
                    drawHangman();
                }
            }
            if (res.join('') === word) {     
                $('#regulations').hide();
                ctx.clearRect(0, 0, canvas.width, canvas.height);  
                $('#victory').text(`Вы выиграли! Загаданое слово было: ${word}`);
                $('#myPicture').attr('src', 'https://raw.githubusercontent.com/DanielShpagin/Hangman/main/img/victory.png');
                $('#restart').show().click(function () {
                    $('#victory').text("");
                    initeAll();
                });
            }
        }
    });
    
</script>

<style>
    .container{
        max-width: 700px;
        margin: auto;
        align-items: center;
        text-align: center;
    }
    #restart{
        display: none; 
        transform: rotate(0deg);
        transition-duration: 1000ms;
    }
    #restart:hover{
        transform: rotate(360deg) scale(1.3);
        transition-duration: 1000ms;
    }
    #canvas{
        padding: 0;
        margin: auto;
        display: block;
    }
    .myButton{
        box-shadow:inset 0px 1px 0px 0px #ffffff;
        background:linear-gradient(to bottom, #ededed 5%, #dfdfdf 100%);
        background-color:#ededed;
        border-radius:6px;
        border:1px solid #dcdcdc;
        display:inline-block;
        cursor:pointer;
        color:#777777;
        font-family:Arial;
        font-size:15px;
        font-weight:bold;
        padding:6px 24px;
        text-decoration:none;
        text-shadow:0px 1px 0px #ffffff;
    }
    .myButton:hover{
        background:linear-gradient(to bottom, #dfdfdf 5%, #ededed 100%);
        background-color:#dfdfdf;
    }
    .myButton:active{
        position:relative;
        top:1px;
    }

    #close{
        display: none; 
        font-size: 30px;
    }
    #hangmanRegulation{
        font-family: "Comic Sans MS", Courier;
        display: none;
        font-size: 20px;
    }
    #victory{
        font-family: "Comic Sans MS", Courier;
    }
    #gameOver{
        font-family: "Comic Sans MS", Courier;
    }
</style> 
</body>
</html>
